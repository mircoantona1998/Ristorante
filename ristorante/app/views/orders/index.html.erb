<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ordini</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
</head>
<body>

  <h1>Ordini</h1>
  <% if flash[:notice] %>
  <div class="alert alert-success">
    <%= flash[:notice] %>
  </div>
<% end %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Tavolo</th>
        <th>Portate e Quantit√†</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    <% @orders.each do |order| %>
      <tr>
        <td><%= order.table.present? ? order.table.numero : "Tavolo non trovato" %></td>

        <td>
        <ul>
          <% order.order_broughts.each do |order_brought| %>
            <li>
          <p><%= order_brought.brought.nome %> x <%= number_with_precision(order_brought.quantita, precision: 0) %></p>
          <% end %>
          </li>
        </td>
        </ul>
        <td class="action-icons">
        <%= link_to edit_order_path(order), class: 'action-icon edit' do %>
          <i class="fas fa-edit"></i>
        <% end %>
        <%= form_with model: order, url: order_path(order), method: :delete, local: true do %>
          <%= button_tag type: 'submit', class: 'btn btn-danger action-icon delete' do %>
            <i class="fas fa-trash"></i>  
          <% end %>
        <% end %>
      </td>
      </tr>
    <% end %>
    
    </tbody>
  </table>
  
  <%= link_to '<i class="fas fa-plus"></i>'.html_safe, new_order_path, class: 'add-button' %>

  <%= link_to '<i class="fas fa-home"></i>'.html_safe, root_path, class: 'home-button' %>

</body>
</html>
